## Java运行流程

### 类加载器

当JVM将所需要的 *.class文件加载到JVM的进程之中，这个过程就需要一个类加载器——ClassLoader。有类加载器的好处是：可以随意制定 *.class文件的所在路径.

### Java程序执行流程

![Java程序执行流程](/assets/WechatIMG297.jpeg)

1. 所有的程序都要求运行在JVM上，是因为考虑到了可移植性问题，可是如果要想真正的去执行程序，绝对不可能离开操作系统的支持
2. 在Java中可以使用native实现本地C函数的调用，但是这些都属于程序运行的辅助手段，而真正程序的运行都在运行时数据区中

### Java运行时数据区

![Java运行时数据区](/assets/2981516982268_.pic_hd.jpg)

- 在整个的运行时数据区中分为如下几块内存空间：
 1. 堆内存：保存所有引用数据类型的真实信息
 2. 栈内存：基本类型、运算、指向堆内存的指针
 3. 方法区：所有定义方法的信息都保存在方法区当中，此区属于共享区
 4. 程序计数器： （有异常之后的代码定位行数）是一个非常小的内存空间，小到可以忽略
 5. 本地方法栈： 每一次执行递归的方法处理的时候，都会将上一个方法入栈
 
### 本地方法栈
 
![本地方法栈](/assets/2991516983030_.pic_hd.jpg)

### 栈帧

![](/assets/3041517026470_.pic_hd.jpg)

![栈帧](/assets/3001516983140_.pic_hd.jpg)

- 在整个Java之中，存在有对象池的概念，对象池是对整个常量池的一个规则破坏，因为在JVM启动的时候，所有的常量都已经分配还内存空间了，但是String中的intern方法却可以打破这种限制，动态的进行常量池的内容设置

![](/assets/3011516983460_.pic_hd.jpg)

- 对于运行时数据区，直接和Java中的线程对象有关联，所谓的Java内存调优，指的都是针对运行时数据区的这块地方