| **synchronized** | **CAS** |
| :--- | :--- |
| 同步锁 | 比较和替换 |
| 可以保证线程安全 | 可以保证线程安全 |
| 原子性操作：**synchronized\( Xxx.class \) { 代码语句 }** | 原子性操作：**一系列以Atomic开头的包装类，boolean,integer,Long** |
| **会有性能问题**，具体是指：会让没有得到锁资源的线程进入被**阻塞状态**，在争夺到锁资源之后会变为**可运行状态， **这个过程中涉及到操作系统**用户模式**和**内核模式**的转换，代价比较高。 | 性能要比synchronized要好，**但是也不绝对** |
|  | CAS机制中使用了3个基本的操作数：内存地址V，旧的预期值A，新的修改值B。**更新一个变量的时候，只有当变量的预期值A和内存地址V当中的实际值相同时，才会将内存地址V对应的值修改为B。** |
|  | **先比对地址是否一样，如果一样，把旧的替换成新的。** |
|  | 如果地址不相等（存在被其他的线程抢先一步修改的情况，这种内存地址不相等的情况下会重新获取期望值，并且重新计算新的修改值，这个重新计算的过程称为**自旋**）。 |



